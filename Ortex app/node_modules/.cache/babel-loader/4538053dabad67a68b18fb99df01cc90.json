{"ast":null,"code":"'use strict';\n\nconst auth = require('./auth.js');\n\nconst func = require('./functions.js');\n\nconst fetch = require('node-fetch'); //setting global variables to be used outside this module\n\n\nglobal.country = null;\nglobal.category = null;\nglobal.category_group = null;\nglobal.lists = null; //This function builds the path to get the API request:\n\n/**************************************************************************************************************  \r\n   parameters:\r\n    String: country, category, category_group, lists\r\n\r\n   example:\r\n    getEurostatData(lists = 'categories');\r\n    getEurostatData(lists = 'countries');\r\n    getEurostatData(country ='Denmark');        \r\n    getEurostatData(category ='People at risk of income poverty after social transfers');        \r\n    getEurostatData(category_group ='Poverty');        \r\n    getEurostatData(country ='Denmark', category = 'People at risk of income poverty after social transfers');\r\n    getEurostatData(country ='Denmark', category_group = 'Poverty');             \r\n\r\n****************************************************************************************************************/\n\nfunction getEurostatData() {\n  var url = '';\n  var Data = '';\n\n  if (lists != null) {\n    if (lists == 'countries') {\n      url = '/eurostat/countries';\n    }\n\n    if (lists == 'categories') {\n      url = '/eurostat/categories';\n    }\n  }\n\n  if (country != null) {\n    url = '/eurostat/country/' + country;\n  }\n\n  if (category_group != null) {\n    url = '/eurostat' + '?c=' + apikey + '&category_group=' + category_group;\n  }\n\n  if (category != null) {\n    url = '/eurostat' + '?c=' + apikey + '&category=' + category;\n  }\n\n  if (country != null && category_group != null) {\n    url = '/eurostat/country/' + country + '?c=' + apikey + '&category_group=' + category_group;\n  }\n\n  if (country != null && category != null) {\n    url = '/eurostat/country/' + country + '?c=' + apikey + '&category=' + category;\n  }\n\n  if (url.includes(category_group) || url.includes(category)) {\n    Data = url_base + url.replace(' ', '%20');\n  } else {\n    Data = url_base + url + '?c=' + apikey.replace(' ', '%20');\n  }\n\n  return fetch(Data).then(func.handleErrors).then(function (response) {\n    return response.json(); // process it inside the `then` when calling the function       \n  }).catch(function (err) {\n    return err.message;\n  });\n}\n\nmodule.exports.getEurostatData = getEurostatData;","map":{"version":3,"sources":["C:/Users/Camo/Desktop/ORTEX/ortex-app/node_modules/tradingeconomics/eurostat.js"],"names":["auth","require","func","fetch","global","country","category","category_group","lists","getEurostatData","url","Data","apikey","includes","url_base","replace","then","handleErrors","response","json","catch","err","message","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,WAAD,CAApB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAD,CAApB;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,YAAD,CAArB,C,CAEA;;;AACAG,MAAM,CAACC,OAAP,GAAiB,IAAjB;AACAD,MAAM,CAACE,QAAP,GAAkB,IAAlB;AACAF,MAAM,CAACG,cAAP,GAAwB,IAAxB;AACAH,MAAM,CAACI,KAAP,GAAe,IAAf,C,CAIA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,eAAT,GAA2B;AAEvB,MAAIC,GAAG,GAAG,EAAV;AACA,MAAIC,IAAI,GAAG,EAAX;;AAEA,MAAIH,KAAK,IAAI,IAAb,EAAkB;AACd,QAAIA,KAAK,IAAI,WAAb,EAAyB;AACrBE,MAAAA,GAAG,GAAG,qBAAN;AACH;;AACD,QAAIF,KAAK,IAAI,YAAb,EAA0B;AACtBE,MAAAA,GAAG,GAAG,sBAAN;AACH;AACJ;;AACD,MAAIL,OAAO,IAAI,IAAf,EAAoB;AAChBK,IAAAA,GAAG,GAAG,uBAAuBL,OAA7B;AACH;;AACD,MAAIE,cAAc,IAAI,IAAtB,EAA2B;AACvBG,IAAAA,GAAG,GAAG,cAAc,KAAd,GAAsBE,MAAtB,GAA+B,kBAA/B,GAAoDL,cAA1D;AACH;;AACD,MAAID,QAAQ,IAAI,IAAhB,EAAqB;AACjBI,IAAAA,GAAG,GAAG,cAAc,KAAd,GAAsBE,MAAtB,GAA+B,YAA/B,GAA8CN,QAApD;AACH;;AACD,MAAID,OAAO,IAAI,IAAX,IAAmBE,cAAc,IAAI,IAAzC,EAA8C;AAC1CG,IAAAA,GAAG,GAAG,uBAAuBL,OAAvB,GAAiC,KAAjC,GAAyCO,MAAzC,GAAkD,kBAAlD,GAAuEL,cAA7E;AACH;;AACD,MAAIF,OAAO,IAAI,IAAX,IAAmBC,QAAQ,IAAI,IAAnC,EAAwC;AACpCI,IAAAA,GAAG,GAAG,uBAAuBL,OAAvB,GAAiC,KAAjC,GAAyCO,MAAzC,GAAkD,YAAlD,GAAiEN,QAAvE;AACH;;AAGD,MAAII,GAAG,CAACG,QAAJ,CAAaN,cAAb,KAAgCG,GAAG,CAACG,QAAJ,CAAaP,QAAb,CAApC,EAA2D;AACvDK,IAAAA,IAAI,GAAGG,QAAQ,GAAGJ,GAAG,CAAEK,OAAL,CAAc,GAAd,EAAkB,KAAlB,CAAlB;AACH,GAFD,MAEK;AACDJ,IAAAA,IAAI,GAAGG,QAAQ,GAAGJ,GAAX,GAAiB,KAAjB,GAAyBE,MAAM,CAACG,OAAP,CAAgB,GAAhB,EAAoB,KAApB,CAAhC;AACH;;AAED,SAAOZ,KAAK,CAACQ,IAAD,CAAL,CACNK,IADM,CACDd,IAAI,CAACe,YADJ,EAEND,IAFM,CAED,UAASE,QAAT,EAAmB;AACrB,WAAOA,QAAQ,CAACC,IAAT,EAAP,CADqB,CACG;AAC3B,GAJM,EAIJC,KAJI,CAIE,UAAUC,GAAV,EAAe;AACpB,WAAOA,GAAG,CAACC,OAAX;AACH,GANM,CAAP;AAQH;;AAEDC,MAAM,CAACC,OAAP,CAAef,eAAf,GAAiCA,eAAjC","sourcesContent":["'use strict'\r\n\r\nconst auth = require('./auth.js');\r\nconst func = require('./functions.js');\r\nconst fetch = require('node-fetch');\r\n\r\n//setting global variables to be used outside this module\r\nglobal.country = null;\r\nglobal.category = null;\r\nglobal.category_group = null;\r\nglobal.lists = null;\r\n\r\n\r\n\r\n//This function builds the path to get the API request:\r\n/**************************************************************************************************************  \r\n   parameters:\r\n    String: country, category, category_group, lists\r\n\r\n   example:\r\n    getEurostatData(lists = 'categories');\r\n    getEurostatData(lists = 'countries');\r\n    getEurostatData(country ='Denmark');        \r\n    getEurostatData(category ='People at risk of income poverty after social transfers');        \r\n    getEurostatData(category_group ='Poverty');        \r\n    getEurostatData(country ='Denmark', category = 'People at risk of income poverty after social transfers');\r\n    getEurostatData(country ='Denmark', category_group = 'Poverty');             \r\n\r\n****************************************************************************************************************/\r\n\r\nfunction getEurostatData() {\r\n    \r\n    var url = '';\r\n    var Data = '';\r\n \r\n    if (lists != null){\r\n        if (lists == 'countries'){\r\n            url = '/eurostat/countries'\r\n        }    \r\n        if (lists == 'categories'){\r\n            url = '/eurostat/categories'\r\n        }     \r\n    }\r\n    if (country != null){      \r\n        url = '/eurostat/country/' + country;    \r\n    }\r\n    if (category_group != null){     \r\n        url = '/eurostat' + '?c=' + apikey + '&category_group=' + category_group;    \r\n    }\r\n    if (category != null){     \r\n        url = '/eurostat' + '?c=' + apikey + '&category=' + category;    \r\n    }\r\n    if (country != null && category_group != null){    \r\n        url = '/eurostat/country/' + country + '?c=' + apikey + '&category_group=' + category_group ;\r\n    }  \r\n    if (country != null && category != null){    \r\n        url = '/eurostat/country/' + country + '?c=' + apikey + '&category=' + category ;\r\n    } \r\n   \r\n    \r\n    if (url.includes(category_group) || url.includes(category)){\r\n        Data = url_base + url .replace (' ','%20');\r\n    }else{\r\n        Data = url_base + url + '?c=' + apikey.replace (' ','%20');\r\n    }\r\n  \r\n    return fetch(Data)\r\n    .then(func.handleErrors)   \r\n    .then(function(response) {    \r\n        return response.json(); // process it inside the `then` when calling the function       \r\n    }).catch(function (err) {\r\n        return err.message;\r\n    });\r\n     \r\n}   \r\n\r\nmodule.exports.getEurostatData = getEurostatData;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script"}