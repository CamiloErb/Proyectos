{"ast":null,"code":"'use strict';\n\nconst auth = require('./auth.js');\n\nconst func = require('./functions.js');\n\nconst fetch = require('node-fetch'); //setting global variables to be used outside this module\n\n\nglobal.country = null;\nglobal.symbol = null;\nglobal.marketsField = null;\nglobal.peers_symbol = null;\nglobal.components_symbol = null;\nglobal.search_term = null;\nglobal.category = null;\nglobal.cross = null; //This function builds the path to get the API request:\n\n/******************************************************************************************************\r\n   parameters:\r\n    country, symbol, peers_symbol, components_symbol, search_term, category, marketsField\r\n    -> MarketsField can be:\r\n        commodities, index, currency and bond\r\n    -> Search_term: search by country\r\n        By Default, the search will look into the categories:Indexes, markets, bonds, and commodities.\r\n\r\n   example:\r\n    getMarketSnap(marketsField ='index');\r\n    getMarketSnap(symbol = 'aapl:us' );        \r\n    getMarketSnap(symbol = ['aapl:us', 'indu:ind']);        \r\n    getMarketSnap(peers_symbol ='aapl:us' );        \r\n    getMarketSnap(components_symbol ='psi20:ind');        \r\n    getMarketSnap(country ='japan');\r\n    getMarketSnap(cross ='eur');          \r\n    getMarketSnap(country ='united states');        \r\n    getMarketSnap(search_term ='japan', category = 'index, markets');        \r\n    getMarketSnap(search_term ='japan', category = 'index, markets');        \r\n\r\n*******************************************************************************************************/\n\nfunction getMarketSnap() {\n  var Data = '';\n  var url = '';\n\n  if (marketsField === 'commodities') {\n    url = '/markets/commodities';\n  }\n\n  if (marketsField === 'currency') {\n    url = '/markets/currency';\n  }\n\n  if (marketsField === 'index') {\n    url = '/markets/index';\n  }\n\n  if (marketsField === 'bond') {\n    url = '/markets/bond';\n  }\n\n  if (symbol != null) {\n    url = '/markets/symbol/' + symbol;\n  }\n\n  if (cross != null) {\n    url = '/markets/currency/' + '?c=' + apikey + '&cross=' + cross;\n  }\n\n  if (peers_symbol != null) {\n    url = '/markets/peers/' + peers_symbol;\n  }\n\n  if (components_symbol != null) {\n    url = '/markets/components/' + components_symbol;\n  }\n\n  if (country != null) {\n    url = '/markets/country/' + country;\n  }\n\n  if (search_term != null) {\n    url = '/markets/search/' + search_term;\n  }\n\n  if (category != null) {\n    url = '/markets/search/' + search_term + '?c=' + apikey + '&category=' + category;\n  }\n\n  if (url.includes(category || cross)) {\n    Data = url_base + url.replace(' ', '%20');\n  } else {\n    Data = url_base + url + '?c=' + apikey.replace(' ', '%20');\n  }\n\n  return fetch(Data).then(func.handleErrors).then(function (response) {\n    return response.json(); // process it inside the `then` when calling the function       \n  }).catch(function (err) {\n    return err.message;\n  });\n}\n\nmodule.exports.getMarketSnap = getMarketSnap;","map":{"version":3,"sources":["C:/Users/Camo/Desktop/ORTEX/ortex-app/node_modules/tradingeconomics/marketSnap.js"],"names":["auth","require","func","fetch","global","country","symbol","marketsField","peers_symbol","components_symbol","search_term","category","cross","getMarketSnap","Data","url","apikey","includes","url_base","replace","then","handleErrors","response","json","catch","err","message","module","exports"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nconst auth = require('./auth.js');\r\nconst func = require('./functions.js');\r\nconst fetch = require('node-fetch');\r\n\r\n\r\n//setting global variables to be used outside this module\r\nglobal.country = null;\r\nglobal.symbol = null;\r\nglobal.marketsField = null;\r\nglobal.peers_symbol = null;\r\nglobal.components_symbol = null;\r\nglobal.search_term = null;\r\nglobal.category = null;\r\nglobal.cross = null;\r\n\r\n\r\n//This function builds the path to get the API request:\r\n/******************************************************************************************************\r\n   parameters:\r\n    country, symbol, peers_symbol, components_symbol, search_term, category, marketsField\r\n    -> MarketsField can be:\r\n        commodities, index, currency and bond\r\n    -> Search_term: search by country\r\n        By Default, the search will look into the categories:Indexes, markets, bonds, and commodities.\r\n\r\n   example:\r\n    getMarketSnap(marketsField ='index');\r\n    getMarketSnap(symbol = 'aapl:us' );        \r\n    getMarketSnap(symbol = ['aapl:us', 'indu:ind']);        \r\n    getMarketSnap(peers_symbol ='aapl:us' );        \r\n    getMarketSnap(components_symbol ='psi20:ind');        \r\n    getMarketSnap(country ='japan');\r\n    getMarketSnap(cross ='eur');          \r\n    getMarketSnap(country ='united states');        \r\n    getMarketSnap(search_term ='japan', category = 'index, markets');        \r\n    getMarketSnap(search_term ='japan', category = 'index, markets');        \r\n\r\n*******************************************************************************************************/\r\n\r\nfunction getMarketSnap(){\r\n\r\n    var Data = '';\r\n    var url = '';\r\n   \r\n    if (marketsField === 'commodities'){    \r\n        url = '/markets/commodities';    \r\n    }\r\n    if (marketsField === 'currency'){      \r\n        url = '/markets/currency';    \r\n    }\r\n    if (marketsField === 'index'){     \r\n        url = '/markets/index';    \r\n    }  \r\n    if (marketsField === 'bond'){     \r\n        url = '/markets/bond';\r\n    }\r\n    if(symbol != null){\r\n        url = '/markets/symbol/' + symbol;\r\n    }\r\n    if(cross != null){\r\n        url = '/markets/currency/' + '?c=' + apikey + '&cross=' + cross;\r\n    }\r\n    if (peers_symbol != null){\r\n        url = '/markets/peers/' + peers_symbol;\r\n    }\r\n    if(components_symbol != null){\r\n        url = '/markets/components/' + components_symbol;\r\n    }\r\n    if(country != null){\r\n        url = '/markets/country/' + country;\r\n    }\r\n\r\n    if(search_term != null){\r\n        url = '/markets/search/' + search_term;   \r\n    }\r\n    if(category != null){\r\n        url = '/markets/search/' + search_term + '?c=' + apikey + '&category=' + category ;\r\n    }\r\n        \r\n    if (url.includes(category || cross)){\r\n        Data = url_base + url .replace (' ','%20');\r\n    }else{\r\n        Data = url_base + url + '?c=' + apikey.replace (' ','%20');\r\n    }\r\n\r\n    return fetch(Data)\r\n    .then(func.handleErrors)   \r\n    .then(function(response) {    \r\n        return response.json(); // process it inside the `then` when calling the function       \r\n    }).catch(function (err) {\r\n        return err.message;\r\n    });\r\n   \r\n}\r\n\r\nmodule.exports.getMarketSnap = getMarketSnap;\r\n\r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script"}